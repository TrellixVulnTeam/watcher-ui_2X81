{"ast":null,"code":"import _slicedToArray from\"/Users/ankitadixit/Documents/watcher-api-access-rights/watcher-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Redirect}from'react-router';import{MDBBtn,MDBCol,MDBContainer,MDBRow,MDBInput}from\"mdbreact\";import{authToken}from'../../services/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LoginPage=function LoginPage(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),response=_useState6[0],setResponse=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),validCred=_useState10[0],setValidCred=_useState10[1];useEffect(function(){if(success===\"true\"){var tk=props.UserChange(response);console.log(\"success\",success);}else if(success===\"false\"){var _tk=props.UserChange(undefined);}},[success]);useEffect(function(){if(validCred===\"true\"){setSuccess(\"true\");}else{setSuccess(\"false\");}},[validCred]);var getInTouch=function getInTouch(){window.open('mailto:info@apnisec.com?subject=Unable to login&body=Provide your user details');};var Login=function Login(){// console.log(email)\n// console.log(password)\nauthToken();var requestHeaders={method:'POST',headers:{'Content-Type':'application/json','mode':'cors'},body:JSON.stringify({\"username\":email,\"password\":password})};fetch('https://api.thewatcher.live//login',requestHeaders).then(function(res){return res.json();}).then(function(data){setResponse(data);//  console.log(data)\nif(data.message!==undefined){setValidCred(\"false\");console.log(\"invald user\");}else{localStorage.setItem(\"username\",data.username);localStorage.setItem(\"is_onboarded\",data.is_onboarded);localStorage.setItem(\"token\",data.jwt_token);data.jwt_token.length>10?setValidCred(\"true\"):setValidCred(\"false\");}});};if(success===\"true\"){return/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/',state:{data:response}}});}return/*#__PURE__*/_jsx(MDBContainer,{fluid:true,children:/*#__PURE__*/_jsxs(MDBRow,{style:{height:\"100vh\"},children:[/*#__PURE__*/_jsx(MDBCol,{xs:\"1\",sm:\"2\",md:\"3\",lg:\"4\",style:{backgroundColor:\"#2bbbad\",opacity:\"0.7\",height:\"100vh\"}}),/*#__PURE__*/_jsx(MDBCol,{xs:\"11\",sm:\"10\",md:\"9\",lg:\"8\",children:/*#__PURE__*/_jsxs(MDBContainer,{style:{marginTop:\"20vh\",marginLeft:\"8vh\"},children:[/*#__PURE__*/_jsx(MDBRow,{children:/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:\"10vh\",fontWeight:700},className:\"h1 text-center\",children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:600,fontSize:\"45px\"},children:\"O\"}),\"nboard to Watcher\"]})}),/*#__PURE__*/_jsx(MDBRow,{children:/*#__PURE__*/_jsx(MDBCol,{md:\"5\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grey-text\",children:[/*#__PURE__*/_jsx(MDBInput,{label:\"Type your username\",icon:\"envelope\",group:true,type:\"email\",validate:true,error:\"wrong\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},success:\"right\"}),/*#__PURE__*/_jsx(MDBInput,{label:\"Type your password\",icon:\"lock\",group:true,type:\"password\",validate:true,value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(MDBBtn,{color:\"dark\",onClick:function onClick(){return Login();},children:\"Login\"})}),validCred===\"false\"?/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"12px\",color:\"red\"},children:response.message}):/*#__PURE__*/_jsx(\"p\",{}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:\"5vh\"},className:\"mb-4\",children:[\"Unable to login ? \",/*#__PURE__*/_jsx(\"a\",{onClick:getInTouch,style:{textDecoration:\"underline\"},children:\"Contact us\"})]})]})})})]})})]})});};","map":{"version":3,"sources":["/Users/ankitadixit/Documents/watcher-api-access-rights/watcher-ui/src/components/login/LoginPage.tsx"],"names":["React","useState","useEffect","Redirect","MDBBtn","MDBCol","MDBContainer","MDBRow","MDBInput","authToken","LoginPage","props","email","setEmail","password","setPassword","response","setResponse","success","setSuccess","validCred","setValidCred","tk","UserChange","console","log","undefined","getInTouch","window","open","Login","requestHeaders","method","headers","body","JSON","stringify","fetch","then","res","json","data","message","localStorage","setItem","username","is_onboarded","jwt_token","length","pathname","state","height","backgroundColor","opacity","marginTop","marginLeft","marginBottom","fontWeight","fontSize","e","target","value","color","textDecoration"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { Redirect } from 'react-router';\nimport {\n    MDBBtn,\n    MDBCol,\n    MDBContainer,\n    MDBRow,\n    MDBInput\n} from \"mdbreact\";\nimport logo from '../../assets/images/loginImage.png';\nimport { authToken } from '../../services/auth'\n\n\nexport const LoginPage = (props: any) => {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [response, setResponse] = useState({});\n    const [success, setSuccess] = useState('');\n    const [validCred, setValidCred] = useState('');\n\n    useEffect(() => {\n        if (success === \"true\") {\n            const tk = props.UserChange(response)\n            console.log(\"success\", success)\n        } else if (success === \"false\") {\n            const tk = props.UserChange(undefined)\n        }\n    }, [success]);\n\n    useEffect(() => {\n        if (validCred === \"true\") {\n            setSuccess(\"true\")\n        } else {\n            setSuccess(\"false\")\n        }\n    }, [validCred]);\n\n    const getInTouch = () => {\n        window.open('mailto:info@apnisec.com?subject=Unable to login&body=Provide your user details')\n    }\n\n    const Login = () => {\n        // console.log(email)\n        // console.log(password)\n        authToken()\n        const requestHeaders = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json', 'mode': 'cors' },\n            body: JSON.stringify({ \"username\": email, \"password\": password })\n        };\n\n        fetch('https://api.thewatcher.live//login', requestHeaders).then(res => res.json()).then((data) => {\n             setResponse(data)\n            //  console.log(data)\n            if(data.message !== undefined){\n                setValidCred(\"false\")\n                console.log(\"invald user\")\n            } else {\n                localStorage.setItem(\"username\", data.username)\n                localStorage.setItem(\"is_onboarded\", data.is_onboarded)\n                localStorage.setItem(\"token\", data.jwt_token)\n                data.jwt_token.length > 10 ? setValidCred(\"true\") : setValidCred(\"false\")\n            }\n          \n          })\n    }\n    if (success === \"true\") {\n        return <Redirect to={{\n            pathname: '/',\n            state: { data: response }\n        }} />\n    }\n    return (\n        <MDBContainer fluid>\n            <MDBRow style={{ height: \"100vh\" }}> \n                <MDBCol xs=\"1\" sm=\"2\" md=\"3\" lg=\"4\" style={{ backgroundColor: \"#2bbbad\", opacity: \"0.7\", height: \"100vh\"}}>\n                </MDBCol>\n                <MDBCol xs=\"11\" sm=\"10\" md=\"9\" lg=\"8\" >\n                    <MDBContainer style={{ marginTop: \"20vh\", marginLeft: \"8vh\"  }}>\n                        <MDBRow>\n                        <p style={{ marginBottom: \"10vh\", fontWeight: 700 }} className=\"h1 text-center\"><span style={{fontWeight: 600, fontSize: \"45px\" }}>O</span>nboard to Watcher</p>\n                        </MDBRow>\n                        <MDBRow>\n                            <MDBCol md=\"5\">\n                                <form>\n                                    <div className=\"grey-text\">\n                                        <MDBInput label=\"Type your username\" icon=\"envelope\" group type=\"email\" validate error=\"wrong\"\n                                            value={email} onChange={e => setEmail((e.target as any).value)} success=\"right\" />\n                                        <MDBInput label=\"Type your password\" icon=\"lock\" group type=\"password\" validate\n                                            value={password} onChange={e => setPassword((e.target as any).value)} />\n                                    </div>\n                                    <div>\n                                        <MDBBtn color=\"dark\"\n                                            onClick={() => Login()}>Login</MDBBtn>\n                                    </div>\n                                    {validCred === \"false\" ? <p style={{fontSize: \"12px\", color: \"red\"}}>{(response as any).message}</p> : <p></p>\n                                    }\n                                    <p style={{ marginTop: \"5vh\" }} className=\"mb-4\">Unable to login ? <a onClick={getInTouch} style={{ textDecoration: \"underline\"}}>Contact us</a></p>\n                                </form>\n                            </MDBCol>\n                        </MDBRow>\n                    </MDBContainer>\n                </MDBCol>\n            </MDBRow>\n            </MDBContainer>\n    );\n}"]},"metadata":{},"sourceType":"module"}