{"ast":null,"code":"var _jsxFileName = \"/Users/ankitadixit/Documents/watcher-ui/src/components/dashboard/Onboarding.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Redirect } from 'react-router';\nimport { MDBBtn, MDBFreeBird, MDBCardBody, MDBCol, MDBContainer, MDBFormInline, MDBIcon, MDBInput, MDBRow, MDBEdgeHeader, MDBCardTitle, MDBProgress } from \"mdbreact\";\nimport { useHistory } from \"react-router\";\nimport \"./style.css\";\nimport { authToken } from '../../services/auth';\nimport { fetchData } from '../../services/apiConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Onboarding = props => {\n  _s();\n\n  const [visibility, setVisibility] = useState(\"none\");\n  const [connection, setconnection] = useState(0);\n  const [checked, setChecked] = useState('');\n  const history = useHistory();\n  const token = localStorage.getItem(\"token\");\n  const username = localStorage.getItem(\"username\");\n  const is_onboarded = localStorage.getItem(\"is_onboarded\");\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    console.log(token);\n\n    if (token) {\n      fetchData('onboard', 'GET');\n    }\n  }, []);\n\n  const Submit = () => {\n    authToken();\n    setVisibility(\"\");\n    setconnection(0);\n    fetchData('verify', 'POST', '?accountName=' + props.Account).then(res => {\n      console.log(props);\n      console.log(\"account changed\");\n\n      if (res.message === \"Scanning is in progress..\") {\n        props.SwitchView('scan');\n      } else {\n        props.SwitchView('assets');\n      }\n    });\n\n    for (let i = 0; i <= 100; i++) {\n      setTimeout(progress, 2000, i);\n    }\n  };\n\n  const onChecked = e => {\n    console.log(e);\n\n    if (checked === e) {\n      setChecked('');\n    } else {\n      setChecked(e);\n    }\n  };\n\n  const progress = i => {\n    setTimeout(setconnection(i), 2000);\n  };\n\n  const Dashboard = () => {\n    console.log(\"dashboard redirection\");\n    console.log(history);\n    console.log(props);\n    const tk = props.UserChange({\n      user: username,\n      is_onboarded: true\n    });\n    history.push(\"/\");\n  };\n\n  console.log(props);\n\n  if (props.User === undefined && username === undefined) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: {\n        pathname: '/login'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 16\n    }, this);\n  }\n\n  if (props.User !== undefined && props.User.is_onboarded === true) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: {\n        pathname: '/'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(MDBContainer, {\n      fluid: true,\n      style: {\n        padding: \"0px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(MDBEdgeHeader, {\n        color: \"none\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MDBFreeBird, {\n        children: /*#__PURE__*/_jsxDEV(MDBRow, {\n          children: /*#__PURE__*/_jsxDEV(MDBCol, {\n            md: \"8\",\n            lg: \"7\",\n            className: \"mx-auto float-none white z-depth-1 py-2 px-2\",\n            children: /*#__PURE__*/_jsxDEV(MDBCardBody, {\n              children: [/*#__PURE__*/_jsxDEV(MDBCardTitle, {\n                children: \"Onboard to Watcher\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"pb-4\",\n                children: \"Follow the steps and submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                children: [/*#__PURE__*/_jsxDEV(\"ol\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"onboardSteps\",\n                    children: \"Hi User, Please follow these steps to onboard.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"onboardSteps\",\n                    children: [\"Please add following IAM role for cross-account access:\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 106,\n                      columnNumber: 41\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-dark font-weight-bold\",\n                      style: {\n                        fontSize: \"14px\"\n                      },\n                      children: \"account-id : 339361266834\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 106,\n                      columnNumber: 48\n                    }, this), \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"onboardSteps\",\n                    children: [\"Role with policies :\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 108,\n                      columnNumber: 41\n                    }, this), \"  \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-dark font-weight-bold\",\n                      style: {\n                        fontSize: \"14px\"\n                      },\n                      children: \"arn:aws:iam::aws:policy/SecurityAudit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 108,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 109,\n                      columnNumber: 45\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-dark font-weight-bold\",\n                      style: {\n                        fontSize: \"14px\"\n                      },\n                      children: \" arn:aws:iam::aws:policy/job-function/ViewOnlyAccess\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 109,\n                      columnNumber: 52\n                    }, this), \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"onboardSteps\",\n                    children: \"Once done, please share the role ARN with us.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                    label: \"arn:aws:iam::202298570782:role/apnisec-test-role\",\n                    icon: \"user\",\n                    size: \"sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(MDBFormInline, {\n                    children: [/*#__PURE__*/_jsxDEV(MDBIcon, {\n                      fab: true,\n                      icon: \"buffer\",\n                      style: {\n                        fontSize: \"25px\",\n                        color: \"black\",\n                        padding: \"0px\",\n                        paddingRight: \"20px\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 113,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                      onClick: () => onChecked('dev'),\n                      checked: checked === 'dev' ? true : false,\n                      label: \"dev\",\n                      type: \"radio\",\n                      id: \"radio1\",\n                      containerClass: \"mr-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 114,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                      onClick: () => onChecked('uat'),\n                      checked: checked === 'uat' ? true : false,\n                      label: \"uat\",\n                      type: \"radio\",\n                      id: \"radio2\",\n                      containerClass: \"mr-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 122,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                      onClick: () => onChecked('staging'),\n                      checked: checked === 'staging' ? true : false,\n                      label: \"staging\",\n                      type: \"radio\",\n                      id: \"radio3\",\n                      containerClass: \"mr-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 130,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n                      onClick: () => onChecked('prd'),\n                      checked: checked === 'prd' ? true : false,\n                      label: \"prd\",\n                      type: \"radio\",\n                      id: \"radio3\",\n                      containerClass: \"mr-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-check\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      className: \"form-check-input\",\n                      id: \"exampleCheck1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 149,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      className: \"form-check-label\",\n                      children: \"Is cloud SSO enabled on this account\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n                  color: \"dark\",\n                  onClick: () => Submit(),\n                  className: \"text-xs-left\",\n                  children: \"Test Connection\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"my-2\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontWeight: 300,\n                    fontSize: \"0.75rem\"\n                  },\n                  children: \"Never submit before the steps\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: visibility\n                },\n                children: [/*#__PURE__*/_jsxDEV(MDBProgress, {\n                  value: connection,\n                  className: \"my-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 37\n                }, this), connection === 100 ? /*#__PURE__*/_jsxDEV(MDBBtn, {\n                  onClick: () => Dashboard(),\n                  style: {\n                    float: \"right\"\n                  },\n                  children: \"Continue to Watcher\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 41\n                }, this) : /*#__PURE__*/_jsxDEV(MDBBtn, {\n                  onClick: () => Dashboard(),\n                  style: {\n                    float: \"right\"\n                  },\n                  disabled: true,\n                  children: \"Continue to Watcher\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(Onboarding, \"A/itDUPlXz7hY175/KkcyEIQ3pY=\", false, function () {\n  return [useHistory];\n});\n\n_c = Onboarding;\n\nvar _c;\n\n$RefreshReg$(_c, \"Onboarding\");","map":{"version":3,"sources":["/Users/ankitadixit/Documents/watcher-ui/src/components/dashboard/Onboarding.tsx"],"names":["React","useState","useEffect","Redirect","MDBBtn","MDBFreeBird","MDBCardBody","MDBCol","MDBContainer","MDBFormInline","MDBIcon","MDBInput","MDBRow","MDBEdgeHeader","MDBCardTitle","MDBProgress","useHistory","authToken","fetchData","Onboarding","props","visibility","setVisibility","connection","setconnection","checked","setChecked","history","token","localStorage","getItem","username","is_onboarded","console","log","Submit","Account","then","res","message","SwitchView","i","setTimeout","progress","onChecked","e","Dashboard","tk","UserChange","user","push","User","undefined","pathname","padding","fontSize","color","paddingRight","fontWeight","display","float"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport { Redirect } from 'react-router';\nimport { Header } from \"../../common/Header\";\nimport {\n    MDBBtn,\n    MDBFreeBird,\n    MDBCard,\n    MDBCardBody,\n    MDBCardImage,\n    MDBCardText,\n    MDBCol,\n    MDBContainer,\n    MDBFormInline,\n    MDBIcon,\n    MDBInput,\n    MDBRow,\n    MDBTable,\n    MDBTableBody,\n    MDBTableHead,\n    MDBEdgeHeader,\n    MDBCardTitle,\n    MDBProgress\n} from \"mdbreact\";\nimport { useHistory } from \"react-router\";\nimport \"./style.css\"\nimport { authToken } from '../../services/auth'\nimport { fetchData } from '../../services/apiConfig'\n\nexport const Onboarding = (props: any) => {\n    const [visibility, setVisibility] = useState(\"none\");\n    const [connection, setconnection] = useState(0);\n    const [checked, setChecked] = useState('');\n    const history = useHistory();\n    const token = localStorage.getItem(\"token\");\n    const username = localStorage.getItem(\"username\");\n    const is_onboarded = localStorage.getItem(\"is_onboarded\");\n    useEffect(() => {\n        const token = localStorage.getItem(\"token\");\n        console.log(token);\n        if (token) {\n            fetchData('onboard', 'GET')\n           \n        }\n    }, []);\n    const Submit = () => {\n        authToken()\n        setVisibility(\"\")\n        setconnection(0)\n        fetchData('verify', 'POST', '?accountName=' + props.Account).then((res: any) => {\n            console.log(props)\n            console.log(\"account changed\")\n            if(res.message === \"Scanning is in progress..\"){\n                props.SwitchView('scan')\n            } else {\n                props.SwitchView('assets')\n            }\n        })\n        for (let i = 0; i <= 100; i++) {\n            setTimeout(progress, 2000, i)\n        }\n    }\n    const onChecked = (e:any) => {\n        console.log(e)\n        if(checked === e){\n            setChecked('')\n        } else {\n        setChecked(e)\n        }\n    }\n    const progress = (i: any) => {\n        setTimeout((setconnection(i) as any), 2000)\n    }\n    const Dashboard = () => {\n        console.log(\"dashboard redirection\");\n        console.log(history);\n        console.log(props)\n        const tk = props.UserChange({ user: username, is_onboarded: true })\n        history.push(\"/\");\n    }\n    console.log(props)\n    if (props.User === undefined && username === undefined) {\n        return <Redirect to={{\n            pathname: '/login',\n        }} />\n    }\n    if (props.User !== undefined && props.User.is_onboarded === true) {\n        return <Redirect to={{\n            pathname: '/',\n        }} />\n    }\n\n    return (\n        <>\n            <MDBContainer fluid style={{ padding: \"0px\" }}>\n                <MDBEdgeHeader color=\"none\"></MDBEdgeHeader>\n                <MDBFreeBird>\n                    <MDBRow>\n                        <MDBCol md=\"8\" lg=\"7\" className=\"mx-auto float-none white z-depth-1 py-2 px-2\">\n                            <MDBCardBody>\n                                <MDBCardTitle>Onboard to Watcher</MDBCardTitle>\n                                <p className=\"pb-4\">Follow the steps and submit</p>\n                                <form>\n                                    <ol>\n                                        <li className=\"onboardSteps\">Hi User, Please follow these steps to onboard.</li>\n                                        <li className=\"onboardSteps\">Please add following IAM role for cross-account access:\n                                        <br /> <span className='text-dark font-weight-bold' style={{ fontSize: \"14px\" }}>account-id : 339361266834</span> </li>\n                                        <li className=\"onboardSteps\">Role with policies :\n                                        <br />  <span className='text-dark font-weight-bold' style={{ fontSize: \"14px\" }}>arn:aws:iam::aws:policy/SecurityAudit</span>\n                                            <br /> <span className='text-dark font-weight-bold' style={{ fontSize: \"14px\" }}> arn:aws:iam::aws:policy/job-function/ViewOnlyAccess</span> </li>\n                                        <li className=\"onboardSteps\">Once done, please share the role ARN with us.</li>\n                                        <MDBInput label=\"arn:aws:iam::202298570782:role/apnisec-test-role\" icon=\"user\" size=\"sm\" />\n                                        <MDBFormInline>\n                                            <MDBIcon fab icon=\"buffer\" style={{ fontSize: \"25px\", color: \"black\", padding: \"0px\", paddingRight: \"20px\" }} />\n                                            <MDBInput\n                                                onClick={() => onChecked('dev')}\n                                                checked={checked === 'dev' ? true : false}\n                                                label='dev'\n                                                type='radio'\n                                                id='radio1'\n                                                containerClass='mr-5'\n                                            />\n                                            <MDBInput\n                                                onClick={() => onChecked('uat')}\n                                                checked={checked === 'uat' ? true : false}\n                                                label='uat'\n                                                type='radio'\n                                                id='radio2'\n                                                containerClass='mr-5'\n                                            />\n                                            <MDBInput\n                                                 onClick={() => onChecked('staging')}\n                                                 checked={checked === 'staging' ? true : false}\n                                                label='staging'\n                                                type='radio'\n                                                id='radio3'\n                                                containerClass='mr-5'\n                                            />\n                                            <MDBInput\n                                                onClick={() => onChecked('prd')}\n                                                checked={checked === 'prd' ? true : false}\n                                                label='prd'\n                                                type='radio'\n                                                id='radio3'\n                                                containerClass='mr-5'\n                                            />\n                                        </MDBFormInline>\n                                        <br />\n                                        <div className=\"form-check\">\n                                            <input type=\"checkbox\" className=\"form-check-input\" id=\"exampleCheck1\" />\n                                            <label className=\"form-check-label\">Is cloud SSO enabled on this account</label>\n                                        </div>\n                                    </ol>\n                                    <br />\n                                    <MDBBtn color=\"dark\" onClick={() => Submit()} className=\"text-xs-left\">Test Connection</MDBBtn>\n                                </form>\n                                <div className=\"my-2\">\n                                    <p style={{ fontWeight: 300, fontSize: \"0.75rem\" }}>Never submit before the steps</p>\n                                </div>\n                                <div style={{ display: visibility }}>\n                                    <MDBProgress value={connection} className=\"my-2\" />\n                                    {connection === 100 ?\n                                        <MDBBtn onClick={() => Dashboard()} style={{ float: \"right\" }}>Continue to Watcher</MDBBtn> :\n                                        <MDBBtn onClick={() => Dashboard()} style={{ float: \"right\" }} disabled>Continue to Watcher</MDBBtn>}\n                                </div>\n                            </MDBCardBody>\n                        </MDBCol>\n                    </MDBRow>\n                </MDBFreeBird>\n            </MDBContainer>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}