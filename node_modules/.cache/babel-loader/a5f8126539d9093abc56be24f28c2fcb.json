{"ast":null,"code":"var _jsxFileName = \"/Users/ankitadixit/Documents/watcher-api-access-rights/watcher-ui/src/components/dashboard/ScmWatcher.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Redirect } from 'react-router';\nimport { MDBBtn, MDBContainer, MDBIcon, MDBRow } from \"mdbreact\";\nimport \"./style.css\";\nimport { fetchData } from '../../services/apiConfig';\nimport scm1 from \"../../assets/images/scm1.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ScmWatcher = props => {\n  _s();\n\n  const token = localStorage.getItem(\"token\");\n  const [view, setView] = useState(false);\n  const [webhook, setWebhook] = useState('');\n  const [platform, setPlatform] = useState('');\n  const [togglePlatform, setTogglePlatform] = useState('');\n  const [whconnected, setWhconnected] = useState(false);\n  useEffect(() => {\n    fetchData('settings', 'GET').then(res => {\n      console.log(res);\n\n      if (res.platform !== undefined && res.platform !== null) {\n        setView(true);\n        setWhconnected(true);\n        setWebhook(res.value);\n        setPlatform(res.platform);\n      }\n    });\n  }, [props]);\n\n  const handleSwitchChange = id => {\n    console.log(id);\n\n    if (platform.length < 1) {\n      togglePlatform === id ? setTogglePlatform('') : setTogglePlatform(id);\n      console.log(togglePlatform.length);\n\n      if (togglePlatform === id) {\n        setView(false);\n      } else {\n        setView(true);\n      }\n    }\n  };\n\n  const ConnecttoWebhook = () => {\n    console.log(\"connect\");\n    togglePlatform.length > 0 ? setPlatform(togglePlatform) : setPlatform(platform);\n    fetchData('/alerts', 'POST', {\n      \"platform\": platform || togglePlatform,\n      \"webhook_url\": webhook\n    }).then(res => {\n      console.log(res.status);\n\n      if (res.status === 204) {\n        console.log(\"found\");\n        setWhconnected(true);\n      } else {\n        console.log(\"not found\");\n      }\n    });\n    setWhconnected(true);\n  };\n\n  const EditWebhook = () => {\n    console.log(\"edit\");\n    setView(true);\n    setWhconnected(false);\n  };\n\n  if (token === null || token === undefined || token.length < 0) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: {\n        pathname: '/login'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(MDBContainer, {\n      fluid: true,\n      className: \"pb-5\",\n      style: {\n        padding: \"2vw\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(MDBRow, {\n        children: /*#__PURE__*/_jsxDEV(MDBBtn, {\n          className: \"float-right\",\n          color: \"dark\",\n          onClick: () => props.SwitchView('home'),\n          style: {\n            border: \"2px solid blue-grey\",\n            borderRadius: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(MDBIcon, {\n            fas: true,\n            icon: \"angle-left\",\n            style: {\n              fontSize: \"15px\",\n              marginLeft: \"3px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 29\n          }, this), \"\\xA0\\xA0 Go back to dashboard\\xA0\\xA0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            fontWeight: 800\n          },\n          children: \"SCM Watcher\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(MDBRow, {\n        style: {\n          display: \"flex\",\n          justifyContent: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: scm1,\n            style: {\n              width: \"60vw\",\n              marginLeft: \"20px\",\n              height: \"10vh\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\n_s(ScmWatcher, \"H/uc98txAVxofXb1YQGXblXtCeE=\");\n\n_c = ScmWatcher;\n\nvar _c;\n\n$RefreshReg$(_c, \"ScmWatcher\");","map":{"version":3,"sources":["/Users/ankitadixit/Documents/watcher-api-access-rights/watcher-ui/src/components/dashboard/ScmWatcher.tsx"],"names":["React","useState","useEffect","Redirect","MDBBtn","MDBContainer","MDBIcon","MDBRow","fetchData","scm1","ScmWatcher","props","token","localStorage","getItem","view","setView","webhook","setWebhook","platform","setPlatform","togglePlatform","setTogglePlatform","whconnected","setWhconnected","then","res","console","log","undefined","value","handleSwitchChange","id","length","ConnecttoWebhook","status","EditWebhook","pathname","padding","SwitchView","border","borderRadius","fontSize","marginLeft","display","justifyContent","fontWeight","width","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Redirect } from 'react-router';\nimport { Header } from \"../../common/Header\";\nimport {\n    MDBBtn,\n    MDBFreeBird,\n    MDBCard,\n    MDBCardBody,\n    MDBCardImage,\n    MDBCardText,\n    MDBCol,\n    MDBContainer,\n    MDBFormInline,\n    MDBIcon,\n    MDBInput,\n    MDBRow,\n    MDBTable,\n    MDBTableBody,\n    MDBTableHead,\n    MDBEdgeHeader,\n    MDBCardTitle,\n    MDBProgress,\n    MDBListGroup,\n    MDBListGroupItem,\n    MDBBreadcrumbItem,\n    MDBBreadcrumb,\n    MDBNotification,\n    MDBLink\n} from \"mdbreact\";\nimport { useHistory } from \"react-router\";\nimport { Chart } from \"react-google-charts\";\nimport \"./style.css\"\nimport { fetchData } from '../../services/apiConfig';\nimport scm1 from \"../../assets/images/scm1.png\"\nexport const ScmWatcher = (props: any) => {\n    const token = localStorage.getItem(\"token\");\n    const [view, setView] = useState(false);\n    const [webhook, setWebhook] = useState('');\n    const [platform, setPlatform] = useState('');\n    const [togglePlatform, setTogglePlatform] = useState('')\n    const [whconnected, setWhconnected] = useState(false);\n    useEffect(() => {\n        fetchData('settings', 'GET').then((res: any) => {\n            console.log(res)\n            if(res.platform !== undefined && res.platform !== null)  {\n                setView(true)\n                setWhconnected(true)\n                setWebhook(res.value)\n                setPlatform(res.platform)\n            }\n        })\n    }, [props]);\n    const handleSwitchChange = (id: any) => {\n        console.log(id)\n        if(platform.length < 1){\n            togglePlatform === id ?  setTogglePlatform('') : setTogglePlatform(id)\n            console.log(togglePlatform.length)\n            if(togglePlatform === id){\n                setView(false)\n            } else {\n                setView(true)\n            }\n        }\n        \n    }\n    const ConnecttoWebhook = () => {\n        console.log(\"connect\")\n        togglePlatform.length> 0 ? setPlatform(togglePlatform) : setPlatform(platform)\n        fetchData('/alerts', 'POST', { \"platform\": platform || togglePlatform, \"webhook_url\": webhook }).then((res: any) => {\n            console.log(res.status)\n            if(res.status === 204) {\n                console.log(\"found\")\n                setWhconnected(true)\n            } else {\n                console.log(\"not found\")\n            }\n        })\n        setWhconnected(true)\n    }\n    const EditWebhook = () => {\n        console.log(\"edit\")\n        setView(true)\n        setWhconnected(false)\n    }\n    if (token === null || token === undefined || token.length < 0) {\n        return <Redirect to={{\n            pathname: '/login',\n        }} />\n    }\n\n    return (\n        <>\n            <MDBContainer fluid className=\"pb-5\" style={{ padding: \"2vw\" }}>\n                <MDBRow >\n                        <MDBBtn className=\"float-right\" \n                            color=\"dark\"\n                            onClick={() => props.SwitchView('home')}\n                            style={{ border: \"2px solid blue-grey\", borderRadius: \"10px\" }}>\n                            <MDBIcon fas icon=\"angle-left\" style={{ fontSize: \"15px\", marginLeft: \"3px\" }} />\n                            &nbsp;&nbsp; Go back to dashboard&nbsp;&nbsp;\n                        </MDBBtn>\n\n                        \n                   \n                </MDBRow>\n\n                <MDBRow style={{display: \"flex\", justifyContent: \"center\"}}>\n                <h1 style={{fontWeight: 800}}>SCM Watcher</h1>\n                <br />\n                {/* <div>\n                    <img src={scm1} style={{ width: \"500px\", marginLeft: \"20px\" }} />\n                </div> */}\n                </MDBRow>\n                <MDBRow style={{display: \"flex\", justifyContent: \"center\"}}>\n                {/* <h1 style={{fontWeight: 800}}>SCM Watcher</h1> */}\n                <br />\n                <div>\n                    <img src={scm1} style={{ width: \"60vw\", marginLeft: \"20px\", height: \"10vh\" }} />\n                </div>\n                </MDBRow>\n            </MDBContainer>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}