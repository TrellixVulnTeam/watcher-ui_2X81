{"ast":null,"code":"import _slicedToArray from\"/Users/ankitadixit/Documents/watcher-api-access-rights/watcher-ui/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Redirect}from'react-router';import{MDBBtn,MDBCol,MDBContainer,MDBIcon,MDBRow,MDBBreadcrumbItem,MDBBreadcrumb,MDBCollapse,MDBBadge}from\"mdbreact\";import\"./style.css\";import{fetchData}from'../../services/apiConfig';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Subservices=function Subservices(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),subDomainfullList=_useState2[0],setsubDomainfullList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),subDomains=_useState4[0],setSubDomains=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),collapseID=_useState6[0],setCollapseID=_useState6[1];var _useState7=useState('all'),_useState8=_slicedToArray(_useState7,2),vulnerability=_useState8[0],setVulnerability=_useState8[1];var _useState9=useState('all'),_useState10=_slicedToArray(_useState9,2),isprivate=_useState10[0],setisprivate=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),isresolved=_useState12[0],setisresolved=_useState12[1];console.log(props);var totalCount=0;console.log(props.Account);console.log(props.Service);console.log(subDomains);// totalCount = props.Service.criticalCount + props.Service.highCount + props.Service.lowCount + props.Service.mediumCount;\nconsole.log(totalCount);useEffect(function(){console.log(\"sub-service\");fetchData('resources','GET',\"?accountName=\"+props.Account+\"&resource=\"+props.Service).then(function(res){console.log(res);if(res.message===\"Scanning is in progress..\"){props.SwitchView('scan');}setSubDomains(res);setsubDomainfullList(res);});},[isresolved]);var toggleCollapse=function toggleCollapse(collapseid){if(collapseid!==collapseID){setCollapseID(collapseid);}else{setCollapseID(\"\");}};// const Vulnerability = async (e: any) => {\n//     setVulnerability(e.target.value);\n//     console.log(e.target.value)\n//     console.log(subDomainfullList)\n//     let filter = e.target.value\n//     let filteredSubDomain: any = new Array();\n//     const response = await subDomainfullList.map((subD: any) => {\n//         console.log(subD[filter])\n//         if (subD[filter] !== \"0\") {\n//             console.log(subD)\n//             filteredSubDomain.push(subD)\n//             console.log(filteredSubDomain)\n//         }\n//     })\n//     setSubDomains(filteredSubDomain)\n// }\n// const isPrivate = async (e: any) => {\n//     setisprivate(e.target.value);\n//     let filter = e.target.value\n//     let filteredSubDomain: any = new Array();\n//     const response = await subDomainfullList.map((subD: any) => {\n//         console.log(subD[filter])\n//         if (subD.isPrivate === filter && filter !== 'all') {\n//             console.log(subD)\n//             filteredSubDomain.push(subD)\n//             console.log(filteredSubDomain)\n//         }\n//     })\n//     if (filter === \"all\") {\n//         filteredSubDomain = subDomainfullList\n//     }\n//     setSubDomains(filteredSubDomain)\n// }\n// const markResolved = (e: any) => {\n//     fetchData('subdomain/bug/', 'GET', e).then((res: any) => {\n//         setisresolved(e)\n//         console.log(res)\n//     })\n// }\nvar token=localStorage.getItem(\"token\");if(token===null||token===undefined||token.length<0){return/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/login'}});}// const dummy = [\"abc\", \"cdf\"]\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(MDBContainer,{fluid:true,className:\"pb-5\",style:{padding:\"2vw\"},children:[/*#__PURE__*/_jsx(MDBRow,{children:/*#__PURE__*/_jsx(MDBCol,{sm:\"11\",md:\"11\",lg:\"11\",style:{padding:\"0px\"},children:/*#__PURE__*/_jsxs(MDBBreadcrumb,{children:[/*#__PURE__*/_jsxs(MDBBtn,{className:\"float-left\",color:\"dark\",onClick:function onClick(){return props.SwitchView('home');},style:{border:\"2px solid blue-grey\",borderRadius:\"10px\"},children:[/*#__PURE__*/_jsx(MDBIcon,{fas:true,icon:\"angle-left\",style:{fontSize:\"15px\",marginLeft:\"3px\"}}),\"\\xA0\\xA0 Go back to dashboard\\xA0\\xA0\"]}),/*#__PURE__*/_jsx(MDBBreadcrumbItem,{onClick:function onClick(){return props.SwitchView('home');},style:{cursor:\"pointer\",marginLeft:\"20px\"},children:\"home\"}),/*#__PURE__*/_jsx(MDBBreadcrumbItem,{onClick:function onClick(){return props.SwitchView('assets');},style:{cursor:\"pointer\"},children:\"assets\"}),/*#__PURE__*/_jsx(MDBBreadcrumbItem,{onClick:function onClick(){return props.SwitchView('services');},style:{cursor:\"pointer\"},children:\"services\"}),/*#__PURE__*/_jsx(MDBBreadcrumbItem,{active:true,children:props.Service})]})})}),/*#__PURE__*/_jsx(MDBRow,{children:/*#__PURE__*/_jsxs(MDBCol,{sm:\"11\",md:\"11\",lg:\"11\",style:{padding:\"10px 25px\",border:\"1px solid #ededef\",backgroundColor:\"rgb(237, 237, 239)\"},children:[/*#__PURE__*/_jsxs(MDBRow,{md:\"12\",lg:\"12\",style:{display:\"inline-flex\"},children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-dark font-weight-bold\",style:{fontSize:\"20px\",paddingTop:\"10px\"},children:props.Service}),/*#__PURE__*/_jsx(\"span\",{className:\"text-dark\",style:{fontSize:\"12px\",marginLeft:\"10px\",paddingTop:\"20px\"},children:\"213 available\"})]}),/*#__PURE__*/_jsx(MDBRow,{}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:\"72vh\",overflowY:\"auto\",overflowX:\"hidden\"},children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",style:{listStyle:\"none\",fontSize:\"15px\",marginTop:\"2vw\"},children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:\"white\"},children:subDomains.map(function(subD,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"subDomainVulnearbility\",children:[/*#__PURE__*/_jsxs(\"li\",{className:subD.totalCount>0?\"red-text list-group-item-pentest\":\"green-text list-group-item-pentest\",onClick:function onClick(){return toggleCollapse(\"collapse\"+index++);},children:[subD.name,/*#__PURE__*/_jsxs(\"span\",{className:subD.totalCount>0?\"red-text vbadge\":\"green-text vbadge\",children:[subD.totalCount,\"  issues \\xA0\",/*#__PURE__*/_jsx(\"i\",{className:collapseID!==\"\"?\"fa fa-angle-right\":\"fa fa-angle-down\"})]})]}),/*#__PURE__*/_jsxs(MDBCollapse,{id:\"collapse\"+index,isOpen:collapseID,children:[subD.critical?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(MDBRow,{style:{backgroundColor:\"#f5c6cb\",color:\"darkred\"},className:\"subDomainVulnearbility\",children:[/*#__PURE__*/_jsx(MDBBadge,{className:\"subDomainBadge\",color:\"danger\",children:\"High\"}),Object.keys(subD.critical).map(function(key){return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",marginLeft:\"2vw\",fontSize:\"12px\"},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(MDBRow,{children:[subD.critical[key],/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]})]});})]}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsx(\"div\",{}),subD.high?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(MDBRow,{style:{backgroundColor:\"#f5c6cb\",color:\"darkred\"},className:\"subDomainVulnearbility\",children:[/*#__PURE__*/_jsx(MDBBadge,{className:\"subDomainBadge\",color:\"danger\",children:\"High\"}),Object.keys(subD.high).map(function(key){return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",marginLeft:\"2vw\",fontSize:\"12px\"},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(MDBRow,{children:[subD.high[key],/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]})]});})]}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsx(\"div\",{}),subD.medium?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(MDBRow,{style:{backgroundColor:\"#ffeeba\",color:\"chocolate\"},className:\"subDomainVulnearbility\",children:[/*#__PURE__*/_jsx(MDBBadge,{className:\"subDomainBadge\",color:\"warning\",children:\"Medium\"}),Object.keys(subD.medium).map(function(key){return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",marginLeft:\"2vw\",fontSize:\"12px\"},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(MDBRow,{children:[subD.medium[key],/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]})]});})]}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsx(\"div\",{}),subD.low?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(MDBRow,{style:{backgroundColor:\"#c3e6cb\",color:\"darkgreen\"},className:\"subDomainVulnearbility\",children:[/*#__PURE__*/_jsx(MDBBadge,{className:\"subDomainBadge\",color:\"success\",children:\"Low\"}),Object.keys(subD.low).map(function(key){return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",marginLeft:\"2vw\",fontSize:\"12px\"},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(MDBRow,{children:[subD.low[key],/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]})]});})]}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsx(\"div\",{}),totalCount===0?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MDBRow,{style:{color:\"black\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\",marginLeft:\"2vw\",fontSize:\"12px\",fontWeight:\"bold\",display:\"flex\",justifyContent:\"center\"},children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(MDBRow,{children:[\"! No issues found\",/*#__PURE__*/_jsx(\"br\",{})]})]})}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsx(\"div\",{})]})]});})})})})]})})]})});};","map":{"version":3,"sources":["/Users/ankitadixit/Documents/watcher-api-access-rights/watcher-ui/src/components/dashboard/Subservices.tsx"],"names":["React","useState","useEffect","Redirect","MDBBtn","MDBCol","MDBContainer","MDBIcon","MDBRow","MDBBreadcrumbItem","MDBBreadcrumb","MDBCollapse","MDBBadge","fetchData","Subservices","props","subDomainfullList","setsubDomainfullList","subDomains","setSubDomains","collapseID","setCollapseID","vulnerability","setVulnerability","isprivate","setisprivate","isresolved","setisresolved","console","log","totalCount","Account","Service","then","res","message","SwitchView","toggleCollapse","collapseid","token","localStorage","getItem","undefined","length","pathname","padding","border","borderRadius","fontSize","marginLeft","cursor","backgroundColor","display","paddingTop","maxHeight","overflowY","overflowX","listStyle","marginTop","map","subD","index","name","critical","color","Object","keys","key","width","high","medium","low","fontWeight","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Redirect } from 'react-router';\nimport { Header } from \"../../common/Header\";\nimport {\n    MDBBtn,\n    MDBFreeBird,\n    MDBCard,\n    MDBCardBody,\n    MDBCardImage,\n    MDBCardText,\n    MDBCol,\n    MDBContainer,\n    MDBFormInline,\n    MDBIcon,\n    MDBInput,\n    MDBRow,\n    MDBTable,\n    MDBTableBody,\n    MDBTableHead,\n    MDBEdgeHeader,\n    MDBCardTitle,\n    MDBProgress,\n    MDBListGroup,\n    MDBListGroupItem,\n    MDBBreadcrumbItem,\n    MDBBreadcrumb,\n    MDBCollapse,\n    MDBNotification,\n    MDBBadge,\n} from \"mdbreact\";\nimport \"./style.css\";\nimport { fetchData } from '../../services/apiConfig'\nimport { useWatch } from \"react-hook-form\";\n\nexport const Subservices = (props: any) => {\n    const [subDomainfullList, setsubDomainfullList] = useState([]);\n    const [subDomains, setSubDomains] = useState([]);\n    const [collapseID, setCollapseID] = useState(\"\");\n    const [vulnerability, setVulnerability] = useState('all');\n    const [isprivate, setisprivate] = useState('all')\n    const [isresolved, setisresolved] = useState()\n    console.log(props)\n    let totalCount = 0;\n    console.log(props.Account)\n    console.log(props.Service)\n    console.log(subDomains)\n    // totalCount = props.Service.criticalCount + props.Service.highCount + props.Service.lowCount + props.Service.mediumCount;\n    console.log(totalCount)\n    useEffect(() => {\n        console.log(\"sub-service\")\n        fetchData('resources', 'GET', \"?accountName=\" + props.Account + \"&resource=\" + props.Service).then((res: any) => {\n            console.log(res)\n            if(res.message === \"Scanning is in progress..\"){\n                props.SwitchView('scan')\n            } \n            setSubDomains(res)\n            setsubDomainfullList(res)\n        })\n    }, [isresolved]);\n\n    const toggleCollapse = (collapseid: any) => {\n        if (collapseid !== collapseID) {\n            setCollapseID(collapseid)\n        } else {\n            setCollapseID(\"\")\n        }\n    }\n    // const Vulnerability = async (e: any) => {\n    //     setVulnerability(e.target.value);\n    //     console.log(e.target.value)\n    //     console.log(subDomainfullList)\n    //     let filter = e.target.value\n    //     let filteredSubDomain: any = new Array();\n    //     const response = await subDomainfullList.map((subD: any) => {\n    //         console.log(subD[filter])\n    //         if (subD[filter] !== \"0\") {\n    //             console.log(subD)\n    //             filteredSubDomain.push(subD)\n    //             console.log(filteredSubDomain)\n    //         }\n    //     })\n    //     setSubDomains(filteredSubDomain)\n    // }\n    // const isPrivate = async (e: any) => {\n    //     setisprivate(e.target.value);\n    //     let filter = e.target.value\n    //     let filteredSubDomain: any = new Array();\n    //     const response = await subDomainfullList.map((subD: any) => {\n    //         console.log(subD[filter])\n    //         if (subD.isPrivate === filter && filter !== 'all') {\n    //             console.log(subD)\n    //             filteredSubDomain.push(subD)\n    //             console.log(filteredSubDomain)\n    //         }\n    //     })\n    //     if (filter === \"all\") {\n    //         filteredSubDomain = subDomainfullList\n    //     }\n    //     setSubDomains(filteredSubDomain)\n    // }\n    // const markResolved = (e: any) => {\n    //     fetchData('subdomain/bug/', 'GET', e).then((res: any) => {\n    //         setisresolved(e)\n    //         console.log(res)\n    //     })\n    // }\n    const token = localStorage.getItem(\"token\");\n    if (token === null || token === undefined || token.length < 0) {\n        return <Redirect to={{\n            pathname: '/login',\n        }} />\n    }\n    // const dummy = [\"abc\", \"cdf\"]\n    return (\n        <>\n            <MDBContainer fluid className=\"pb-5\" style={{ padding: \"2vw\" }}>\n                <MDBRow>\n                    <MDBCol sm=\"11\" md=\"11\" lg=\"11\" style={{ padding: \"0px\" }}>\n                        <MDBBreadcrumb >\n                        <MDBBtn className=\"float-left\" \n                            color=\"dark\"\n                            onClick={() => props.SwitchView('home')}\n                            style={{ border: \"2px solid blue-grey\", borderRadius: \"10px\" }}>\n                            <MDBIcon fas icon=\"angle-left\" style={{ fontSize: \"15px\", marginLeft: \"3px\" }} />\n                            &nbsp;&nbsp; Go back to dashboard&nbsp;&nbsp;\n                        </MDBBtn>\n                                <MDBBreadcrumbItem onClick={() => props.SwitchView('home')} style={{ cursor: \"pointer\", marginLeft: \"20px\" }} >home</MDBBreadcrumbItem>\n                                 <MDBBreadcrumbItem onClick={() => props.SwitchView('assets')} style={{ cursor: \"pointer\" }}>assets</MDBBreadcrumbItem>\n                                 <MDBBreadcrumbItem onClick={() => props.SwitchView('services')} style={{ cursor: \"pointer\" }}>services</MDBBreadcrumbItem>\n                                  <MDBBreadcrumbItem active>{props.Service}</MDBBreadcrumbItem>\n                        </MDBBreadcrumb>\n                    </MDBCol>\n                </MDBRow>\n\n                <MDBRow>\n                    <MDBCol sm=\"11\" md=\"11\" lg=\"11\" style={{ padding: \"10px 25px\", border: \"1px solid #ededef\", backgroundColor: \"rgb(237, 237, 239)\" }}>\n                        <MDBRow md=\"12\" lg=\"12\" style={{ display: \"inline-flex\" }}>\n                            <p className='text-dark font-weight-bold' style={{ fontSize: \"20px\", paddingTop: \"10px\" }}>{props.Service}</p>\n                            <span className='text-dark' style={{ fontSize: \"12px\", marginLeft: \"10px\", paddingTop: \"20px\" }}>213 available</span>\n                        </MDBRow>\n                        <MDBRow>\n\n                         \n                        </MDBRow>\n\n                        <div style={{ maxHeight: \"72vh\", overflowY: \"auto\", overflowX: \"hidden\" }}>\n                            <ul className=\"list-group\" style={{ listStyle: \"none\", fontSize: \"15px\", marginTop: \"2vw\" }}>\n                                <div style={{ backgroundColor: \"white\" }}>\n                                    {subDomains.map((subD: any, index: any) =>\n                                        <div className=\"subDomainVulnearbility\">\n                                            <li className={subD.totalCount > 0 ? \"red-text list-group-item-pentest\" : \"green-text list-group-item-pentest\"} \n                                             onClick={() =>\n                                                toggleCollapse(\"collapse\" + index++)}>{subD.name}\n                                                <span className={subD.totalCount > 0 ? \"red-text vbadge\" : \"green-text vbadge\"}>{subD.totalCount}  issues &nbsp;\n                                                    <i className={collapseID !== \"\" ? \"fa fa-angle-right\" : \"fa fa-angle-down\"} /></span>\n                                            </li>\n\n\n                                            <MDBCollapse id={\"collapse\" + index} isOpen={collapseID}>\n\n                                                {subD.critical ?\n                                                    <div>\n                                                    <MDBRow style={{ backgroundColor: \"#f5c6cb\", color: \"darkred\" }} className=\"subDomainVulnearbility\">\n                                                        <MDBBadge className=\"subDomainBadge\" color=\"danger\">High</MDBBadge>\n                                                        {(Object.keys(subD.critical)).map((key: any) => {\n                                                            return <div style={{ width: \"100%\", marginLeft: \"2vw\", fontSize: \"12px\" }}>\n                                                            <br />\n                                                            <MDBRow>\n                                                                    {subD.critical[key]}\n                                                                <br /> <br />\n                                                            </MDBRow>\n                                                        </div>\n                                                        })}\n                                                    </MDBRow><br /></div> : <div />\n                                                }\n                                                {subD.high ?\n                                                    <div>\n                                                        <MDBRow style={{ backgroundColor: \"#f5c6cb\", color: \"darkred\" }} className=\"subDomainVulnearbility\">\n                                                            <MDBBadge className=\"subDomainBadge\" color=\"danger\">High</MDBBadge>\n                                                            {(Object.keys(subD.high)).map((key: any) => {\n                                                                return <div style={{ width: \"100%\", marginLeft: \"2vw\", fontSize: \"12px\" }}>\n                                                                <br />\n                                                                <MDBRow>\n                                                                        {subD.high[key]}\n                                                                    <br /> <br />\n                                                                </MDBRow>\n                                                            </div>\n                                                            })}\n                                                        </MDBRow><br /></div> : <div />\n                                                }\n                                                {subD.medium ?\n                                                    <div>\n                                                    <MDBRow style={{ backgroundColor: \"#ffeeba\", color: \"chocolate\" }} className=\"subDomainVulnearbility\">\n                                                    <MDBBadge className=\"subDomainBadge\" color=\"warning\">Medium</MDBBadge>\n                                                        {(Object.keys(subD.medium)).map((key: any) => {\n                                                            return <div style={{ width: \"100%\", marginLeft: \"2vw\", fontSize: \"12px\" }}>\n                                                                <br />\n                                                                <MDBRow>\n                                                                        {subD.medium[key]}\n                                                                    <br /> <br />\n                                                                </MDBRow>\n                                                            </div>\n                                                        })}\n                                                    </MDBRow><br /></div> : <div />\n                                                }\n                                                {subD.low ?\n                                                    <div>\n                                                        <MDBRow style={{ backgroundColor: \"#c3e6cb\", color: \"darkgreen\" }} className=\"subDomainVulnearbility\">\n                                                            <MDBBadge className=\"subDomainBadge\" color=\"success\">Low</MDBBadge>\n                                                            {(Object.keys(subD.low)).map((key: any) => {\n                                                               return <div style={{ width: \"100%\", marginLeft: \"2vw\", fontSize: \"12px\" }}>\n                                                               <br />\n                                                               <MDBRow>\n                                                                       {subD.low[key]}\n                                                                   <br /> <br />\n                                                               </MDBRow>\n                                                           </div>\n                                                            })}\n                                                        </MDBRow><br /></div> : <div />\n                                                }\n                                                {totalCount === 0 ?\n                                                    <div>\n                                                    <MDBRow style={{ color: \"black\"}} >\n                                                        {/* <MDBBadge className=\"subDomainBadge\" color=\"info\">Low</MDBBadge> */}\n                                                           <div style={{ width: \"100%\", marginLeft: \"2vw\", fontSize: \"12px\", fontWeight: \"bold\", display: \"flex\", justifyContent: \"center\" }}>\n                                                           <br />\n                                                           <MDBRow>\n                                                                 ! No issues found\n                                                               <br /> \n                                                           </MDBRow>\n                                                       </div>\n                                                    </MDBRow><br /></div> : <div />\n                                                }\n                                            </MDBCollapse>\n                                        </div>\n                                    )}\n                                </div>\n                            </ul>\n                        </div>\n                    </MDBCol>\n                </MDBRow>\n            </MDBContainer>\n        </>\n    )\n}"]},"metadata":{},"sourceType":"module"}